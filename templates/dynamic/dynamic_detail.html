{% extends 'login/base.html' %}
{% block title %}åŠ¨æ€è¯¦æƒ…{% endblock %}

{% block content %}
    {% if request.session.is_login %}

        <div style="display: flex; flex-wrap: wrap; ">
            <div tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" style="width: 100%">
                <div class="modal-dialog" role="document" style="width: 80%">
                    <div class="modal-content">
                        {#                                    â¤ï¸æ¨¡æ€å¤´#}
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"
                                    aria-label="Close">
                                <a href="/dynamic/" style="text-decoration:none;font-size: 30px">ğŸ”™</a>
                            </button>

                            <h4 class="modal-title" id="exampleModalLabel">åŠ¨æ€è¯¦æƒ…</h4>
                        </div>
                        {#                                    â¤ï¸æ¨¡æ€èº«ä½“#}
                        <div class="modal-body">
                            {#                                        è¯¥ç”¨æˆ·å¤´åƒã€åç§°#}
                            <div style="display: flex; justify-content: space-between;align-items: center;margin: 20px; ">
                                <div style="display: flex; align-items: center">
                                    <img src="{{ MEDIA_URL }}{{ data.user.user_imag }}" height="60px"
                                         width="60px"
                                         style="border-radius: 50%;" id="a_userimg">
                                    <div style="margin-left: 4px; font-size: 24px"
                                         id="a_username">{{ data.user.name }}</div>
                                </div>
                            </div>
                            {#                                       â¤ï¸ å…¶ä»–éƒ¨åˆ†#}
                            <div style="display: flex;">
                                {#                                        â¤ï¸æ ‡é¢˜ã€å†…å®¹ã€æ—¶é—´#}
                                <div style="margin-left: 20px">
                                    <img src="{{ MEDIA_URL }}{{ data.dyn_imag }}" height="400px"
                                         width="400px" id="a_img"
                                         style="margin-bottom: 20px">
                                    <div style="word-break: break-all;word-wrap: break-word;font-size: 25px;font-weight: bold;margin-bottom:4px"
                                         id="a_title">{{ data.dyn_title }}
                                    </div>
                                    <div style="word-break: break-all;word-wrap: break-word;font-size: 17px;margin-bottom: 4px"
                                         id="a_content">{{ data.dyn_text }}
                                    </div>
                                    <div style="font-size: 15px;color: #9d9d9d" id="a_time">{{ data.dyn_time }}</div>

                                    {% if data.user.id == user.id %}
                                        <a href="#" onclick="confirm_delete()">
                                            <div style="font-size: 30px;position: relative;left: 92%;top: -33px;">ğŸ—‘ï¸
                                            </div>
                                        </a>
                                    {% endif %}

                                </div>

                                {#                                        âš ï¸âš ï¸âš ï¸ç”¨æˆ·è¯„è®ºå±•ç¤ºã€å‘è¡¨è¯„è®ºéƒ¨åˆ†#}
                                <div style="flex: 1; margin-left: 50px;margin-top:-100px;display: flex;flex-direction: column;justify-content: space-between">
                                    {#                                    <div style="word-break: break-all;word-wrap: break-word;font-size: 16px;font-weight: bold;margin-bottom:4px"#}
                                    {#                                         id="a_discuss_username">#}
                                    {#                                    </div>#}
                                    {#                                                æš´åŠ›è¾¾æ ‡ åç»­æ”¹#}
                                    <p style="white-space:nowrap;font-size: 20px">å…±æœ‰{{ comments.count }}æ¡è¯„è®º
                                        <span style="white-space:nowrap;font-size: 30px">ğŸ‘¥</span>
                                    </p>
                                    <script>
                                        // åˆ é™¤å‡½æ•°
                                        function confirm_delete() {
                                            // è°ƒç”¨layerå¼¹çª—ç»„ä»¶
                                            layer.open({
                                                // å¼¹çª—æ ‡é¢˜
                                                title: "ç¡®è®¤åˆ é™¤",
                                                // æ­£æ–‡
                                                content: "ç¡®è®¤åˆ é™¤è¯¥åŠ¨æ€å—ï¼Ÿ",
                                                // ç‚¹å‡»ç¡®å®šæŒ‰é’®åè°ƒç”¨çš„å›è°ƒå‡½æ•°
                                                yes: function (index, layero) {
                                                    // æŒ‡å®šåº”å½“å‰å¾€çš„ url
                                                    location.href = '{% url "delete_dynamic" data.dynamic_id%}'
                                                },
                                            })
                                        }
                                    </script>
                                    {#å±•ç¤ºè¯„è®º#}
                                    <div>
                                        {% for comment in comments reversed %}
                                            <hr>
                                            <p>
                                                <img src="{{ MEDIA_URL }}{{ comment.user.user_imag }}" height="40px"
                                                     width="40px"
                                                     style="border-radius: 50%;">
                                                <strong style="color: #2e6da4;font-size: 20px;position: relative;top: 2px">
                                                    {{ comment.user }}:
                                                    {% if user.id == comment.user.id %}

                                                        <a href="#" onclick="confirm_delete()">
                                                            <span style="font-size: 20px;position: relative;left: 78%;display: inline">ğŸ—‘ï¸</span>
                                                        </a>
                                                    {% endif %}


                                                </strong>

                                            </p>
                                            <pre style="font-family: inherit; font-size: 1em;width: 97%">
{{ comment.com_text }}</pre>
                                            <span style="color: #9d9d9d;position: relative;left: 74%">
                    ğŸ•–{{ comment.com_time|date:"Y-m-d H:i:s" }}
                </span>
                                            <script>
                                                // åˆ é™¤å‡½æ•°
                                                function confirm_delete() {
                                                    // è°ƒç”¨layerå¼¹çª—ç»„ä»¶
                                                    layer.open({
                                                        // å¼¹çª—æ ‡é¢˜
                                                        title: "ç¡®è®¤åˆ é™¤",
                                                        // æ­£æ–‡
                                                        content: "ç¡®è®¤åˆ é™¤è¯¥è¯„è®ºï¼Ÿ",
                                                        // ç‚¹å‡»ç¡®å®šæŒ‰é’®åè°ƒç”¨çš„å›è°ƒå‡½æ•°
                                                        yes: function (index, layero) {
                                                            // æŒ‡å®šåº”å½“å‰å¾€çš„ url
                                                            location.href = '{% url "comment:delete_comment" comment.id%}'
                                                        },
                                                    })
                                                }
                                            </script>
                                        {% endfor %}
                                    </div>

                                    <div>
                                        <form action="{% url 'comment:post_comment' data.dynamic_id %}"
                                              method="POST">
                                            {% csrf_token %}
                                            <textarea type="text" placeholder="è¾“å…¥è¯„è®º..."
                                                      id="com_text"
                                                      name="com_text"
                                                      style="width: 100%;height: 100px;font-size: 24px;padding-left: 24px;padding-top: 16px;border: 0;outline: none;resize: none; "></textarea>
                                            <button type="submit" class="btn btn-primary "
                                                    style="position: relative;left: 90%">å‘é€
                                            </button>
                                        </form>
                                    </div>
                                </div>

                            </div>
                        </div>


                    </div>
                </div>
            </div>

        </div>



        </div>


        </div>

    {% else %}
        <h1>æ²¡æœ‰ç™»å½•ç”¨æˆ·</h1>
    {% endif %}

    <script src="http://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script>



{% endblock %}
