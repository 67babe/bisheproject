{% extends 'login/base.html' %}
{% block title %}æˆ‘çš„åŠ¨æ€{% endblock %}

{% block content %}
    {% if request.session.is_login %}

{#        å‘å¸ƒåŠ¨æ€ã€æ¬¢è¿å›æ¥ã€åŠ¨æ€æœç´¢#}
        <div style="position: fixed; top:90%;left:93%">
            <form method="get" enctype="multipart/form-data" action="/show_upload_dynamic/">
                {% csrf_token %}
                <input type="submit" value="ğŸ“" style="background:none;font-size: 50px ;border: 0px "class="ok">
            </form>
        </div>
        <div style="display: flex; justify-content: space-between">
            <div style="font-size: 28px;margin-left: 10px;margin-bottom: 20px">ä½ å¥½ï¼Œ{{ request.session.user_name }} !
                æ¬¢è¿å›æ¥ï¼ğŸ‘
            </div>
            <form role="search" method="get" id="searchform" action="/search_dynamic/">
              {% csrf_token %}
              <input type="search" name="q" placeholder="æœç´¢åŠ¨æ€" required>
              <button type="submit">ğŸ”<span class="ion-ios-search-strong"></span></button>
            </form>
        </div>


        <div style="display: flex; flex-wrap: wrap; ">
            {% for data in data reversed %}

                <div style="margin-left: 15px;margin-bottom:30px;display: flex;flex-direction: column; width:250px">
                    <div style="display: flex; flex-wrap: wrap;align-items: center;justify-content: space-between;margin-bottom: 4px">

                        <form method="get" enctype="multipart/form-data" action="/show_profile/{{ data.user_id }}/">
                            {#ç‚¹å‡»å¤´åƒæŸ¥çœ‹ç”¨æˆ·é¡µé¢#}
                            {% csrf_token %}
                            <div style="display: flex;align-items: center;">
                                <input type="image" src="{{ MEDIA_URL }}{{ data.user.user_imag }}" height="30px"
                                       width="30px"
                                       style="border-radius: 50%;" value="æŸ¥çœ‹ç”¨æˆ·ä¸»é¡µ">
                                <div style="margin-left: 4px">{{ data.user }}</div>
                            </div>
                        </form>
                    </div>


                    <div style="margin-bottom: 4px">   <!-- ç»™å›¾ç‰‡åŠ  data-toggle="modal"ï¼Œdata-target="#exampleModal"è®¾ç½®ä¸ºã€æŒ‰é’®ã€‘è§¦å‘æ¨¡æ€æ¡† -->

                        <img src="{{ MEDIA_URL }}{{ data.dyn_imag }}" height="250px" width="250px" data-toggle="modal"
                             data-target="#exampleModal"
                             onclick="Values('{{ data.user }}','{{ data.dyn_title }}','{{ data.dyn_text }}','{{ data.dyn_time }}'
                                     ,'{{ MEDIA_URL }}{{ data.dyn_imag }}','{{ MEDIA_URL }}{{ data.user.user_imag }}')">




{#                         â¤ï¸æ¨¡æ€æ¡†ï¼ˆå¼¹å‡ºæ¥çš„ä¸œè¥¿ï¼‰#}
                        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                             aria-labelledby="exampleModalLabel">
                            <div class="modal-dialog" role="document" style="width: 80%">
                                <div class="modal-content">
{#                                    â¤ï¸æ¨¡æ€å¤´#}
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal"
                                                aria-label="Close"><span
                                                aria-hidden="true">Ã—</span></button>
                                        <h4 class="modal-title" id="exampleModalLabel">åŠ¨æ€è¯¦æƒ…</h4>
                                    </div>
{#                                    â¤ï¸æ¨¡æ€èº«ä½“#}
                                    <div class="modal-body">
{#                                        è¯¥ç”¨æˆ·å¤´åƒã€åç§°#}
                                        <div style="display: flex; justify-content: space-between;align-items: center;margin: 20px; ">
                                            <div style="display: flex; align-items: center">
                                                <img src="" height="60px"
                                                     width="60px"
                                                     style="border-radius: 50%;" id="a_userimg">
                                                <div style="margin-left: 4px; font-size: 24px" id="a_username">ç”¨æˆ·å</div>
                                            </div>
                                        </div>
{#                                       â¤ï¸ å…¶ä»–éƒ¨åˆ†#}
                                        <div style="display: flex;">
{#                                        â¤ï¸æ ‡é¢˜ã€å†…å®¹ã€æ—¶é—´#}
                                            <div style="margin-left: 20px">
                                                <img src="" height="400px"
                                                     width="400px" id="a_img"
                                                     style="margin-bottom: 20px">
                                                <div style="word-break: break-all;word-wrap: break-word;font-size: 16px;font-weight: bold;margin-bottom:4px"
                                                     id="a_title">åŠ¨æ€æ ‡é¢˜
                                                </div>
                                                <div style="word-break: break-all;word-wrap: break-word;font-size: 14px;margin-bottom: 4px"
                                                     id="a_content">åŠ¨æ€å†…å®¹
                                                </div>
                                                <div style="font-size: 12px;color: #9d9d9d" id="a_time">åŠ¨æ€å‘è¡¨æ—¶é—´</div>
                                            </div>

{#                                        âš ï¸âš ï¸âš ï¸ç”¨æˆ·è¯„è®ºå±•ç¤ºã€å‘è¡¨è¯„è®ºéƒ¨åˆ†#}
                                            <div style="flex: 1; margin-left: 50px;display: flex;flex-direction: column;justify-content: space-between">
                                                 <div style="word-break: break-all;word-wrap: break-word;font-size: 16px;font-weight: bold;margin-bottom:4px"
                                                     id="a_discuss_username">
                                                </div>
                                                <div style="margin-bottom: 8px;"><span
                                                        style="font-size: 18px;font-weight: bold;color: #2e6da4">ç”¨æˆ·1å·: </span>å¥½å¯çˆ±å‘€
                                                </div>
                                                <div>
                                                    <form>
                                            <textarea type="text" placeholder="è¾“å…¥è¯„è®º..."
                                                      style="width: 100%;height: 100px;font-size: 24px;padding-left: 24px;padding-top: 16px;border: 0;outline: none;resize: none; "></textarea>
                                                    </form>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
{#                                    æ¨¡æ€è„š#}
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">è¿”å›
                                        </button>
                                        <button type="button" class="btn btn-primary">å‘è¡¨è¯„è®º</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>


                    <div>{#å¤–åŠ¨æ€ä¸‹å›¾ç‰‡ä¸‹çš„æ ‡é¢˜ã€æ–‡æœ¬ã€ç‚¹èµã€æ—¶é—´#}
                        <div style="display:flex;justify-content: space-between">
                            <div style="word-break: break-all;word-wrap: break-word;font-size: 16px;font-weight: bold">{{ data.dyn_title }}</div>
                            {% if data.dyn_like > 0 %}
                                <div style="font-size: 20px;"><img
                                        src="../static/media/others_img/lv1.png">ï¸
                                    <span style="font-size: 16px;color:darkgray;">{{ data.dyn_like }}</span></div>
                            {% else %}
                                <div style="font-size: 20px;">ï¸<img src="../static/media/others_img/lv3.png">
                                    <span style="font-size: 16px;color:darkgray;">{{ data.dyn_like }}</span>
                                </div>
                            {% endif %}
                        </div>
                        <div style="word-break: break-all;word-wrap: break-word;font-size: 14px;">{{ data.dyn_text }}</div>
                        <div style="font-size: 12px;color: #9d9d9d">{{ data.dyn_time }}</div>
                        <div>
{#                            <form method="post" action="{% url 'delete_dynamic' data.dynamic_id %}">#}
                             <form method="post" action="/delete_dynamic/{{ data.dynamic_id }}/">
                                {% csrf_token %}
                                <input type="submit" value="åˆ é™¤" >
                            </form>
                        </div>
                    </div>
                </div>
                     {% endfor %}

        </div>

    {% else %}
        <h1>æ²¡æœ‰ç™»å½•ç”¨æˆ·</h1>
    {% endif %}

    <script src="http://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script>
        {#å¦ä¸€ç§ä¼ å€¼æ–¹å¼#}
        {#$('#exampleModal').on('show.bs.modal', function (event) {#}
        {#    var button = $(event.relatedTarget) // è§¦å‘äº‹ä»¶çš„æŒ‰é’®#}
        {#    var recipient = button.data('whatever') // è§£æå‡ºdata-whateverå†…å®¹#}
        {#    var modal = $(this)#}
        {#    modal.find('.modal-title').text(recipient)#}
        {#    modal.find('#username').text(recipient)#}

        $('#exampleModal').modal("hide");
{#æ‰‹åŠ¨éšè—æ¨¡æ€æ¡†ã€‚åœ¨æ¨¡æ€æ¡†éšè—ä¹‹å‰è¿”å›åˆ°ä¸»è°ƒå‡½æ•°ä¸­ ï¼ˆä¹Ÿå°±æ˜¯ï¼Œåœ¨è§¦å‘ hidden.bs.modal äº‹ä»¶ä¹‹å‰ï¼‰ã€‚#}
{#      â¤ï¸  æ‰¾åˆ°idä¸ºa_usernameçš„divï¼Œå°†usernameèµ‹å€¼ç»™ä»–#}
        function Values(username, title, content, time, img, userimg) {
            $('#a_username').text(username);
            $('#a_title').text(title);
            $('#a_content').text(content);
            $('#a_time').text(time);
            $("#a_img").attr('src', img);
            $("#a_userimg").attr('src', userimg);

        }

    </script>

{% endblock %}

